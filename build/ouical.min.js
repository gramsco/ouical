/*! ouical 2013-06-10 */
!function(a){function b(a){return a.toISOString().replace(/-|:|\.\d+/g,"")}function c(a){return a.end?b(a.end):b(new Date(a.start.getTime()+a.duration*h))}function d(a){return{google:i.google(a),yahoo:i.yahoo(a),ical:i.ical(a),outlook:i.outlook(a)}}function e(a){return void 0==a?"options":a.start?void 0==a.end&&void 0==a.duration?"end time":!0:"start time"}function f(a,b){var c=document.createElement("div"),d=Math.floor(1e6*Math.random()),b=b||"+ Add to my Calendar";return c.innerHTML='<label for="checkbox-for-'+d+'" class="add-to-calendar-checkbox">'+b+"</label>",c.innerHTML+='<input name="add-to-calendar-checkbox" class="add-to-calendar-checkbox" id="checkbox-for-'+d+'" type="checkbox">',Object.keys(a).forEach(function(b){c.innerHTML+=a[b]}),c}function g(a){var b=e(a);if("string"==typeof b){var c="ERROR: "+b+" missing",g=document.createElement("div");return g.innerHTML=c,g.style.color="red",console.log(c),g}return f(d(a),a.text)}var h=6e4,i={google:function(a){var d=b(a.start),e=c(a),f=encodeURI(["https://www.google.com/calendar/render","?action=TEMPLATE","&text="+(a.title||""),"&dates="+(d||""),"/"+(e||""),"&details="+(a.description||""),"&location="+(a.address||""),"&sprop=&sprop=name:"].join(""));return'<a class="icon-google" target="_blank" href="'+f+'">Google Calendar</a>'},yahoo:function(a){var c=a.end?(a.end.getTime()-a.start.getTime())/h:a.duration,d=600>c?"0"+Math.floor(c/60):Math.floor(c/60)+"",e=10>c%60?"0"+c%60:c%60+"",f=d+e,g=b(new Date(a.start-a.start.getTimezoneOffset()*h))||"",i=encodeURI(["http://calendar.yahoo.com/?v=60&view=d&type=20","&title="+(a.title||""),"&st="+g,"&dur="+(f||""),"&desc="+(a.description||""),"&in_loc="+(a.address||"")].join(""));return'<a class="icon-yahoo" target="_blank" href="'+i+'">Yahoo! Calendar</a>'},ics:function(a,d,e){var f=b(a.start),g=c(a),h=encodeURI("data:text/calendar;charset=utf8,"+["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT","URL:"+document.URL,"DTSTART:"+(f||""),"DTEND:"+(g||""),"SUMMARY:"+(a.title||""),"DESCRIPTION:"+(a.description||""),"LOCATION:"+(a.address||""),"END:VEVENT","END:VCALENDAR"].join("\n"));return'<a class="'+d+'" target="_blank" href="'+h+'">'+e+"</a>"},ical:function(a){return this.ics(a,"icon-ical","iCal")},outlook:function(a){return this.ics(a,"icon-outlook","Outlook")}};a.addToCalendar=g}(this);